{% extends 'global/base.html' %}
{% load static %}

{% block title %}Atualizar Perfil{% endblock %}

{% block content %}
<div class="form-wrapper">

    <h2>Atualizar Perfil</h2>

        <!-- Mensagens -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        <form 
        action="{{ form_action }}"
        method="POST"
        enctype="multipart/form-data"
        >
            {% csrf_token %}

            <div class="form-content"> 
                {% for field in form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label}}">{{ field.label }}</label>
                        {{ field }}
                        {{ field.errors }}

                        {% if field.help_text %}
                            <p class="help-text">{{ field.help_text }}</p>
                        {% endif %}   
                        
                        {% if field.name == 'image' and field.value.url %}
                            <div class="form-group">
                                <img src="{{ field.value.url }}" alt="">
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            {% if form.non_field_errors %}
                <div class="form-content">
                <div class="form-group">
                    <div class="message error">
                    {{ form.non_field_errors }}
                    </div>
                </div>
            {% endif %}

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Atualizar Perfil</button>
                <a href="{% url 'naya_site:perfil' %}" class="btn btn-secondary">Voltar ao Perfil</a>
            </div>
        </form>
{% endblock %}